# 功能更新日志

## 2025-12-06 更新

### ✅ 已修复

1. **清空棋盘功能**
   - 修复了清空后状态不重置的问题
   - 添加了完整的错误处理
   - 清空后自动刷新棋盘

2. **GTP响应解析**
   - 修复了showboard命令的响应解析
   - 正确处理棋盘数据格式
   - 修复了"Invalid GTP response"错误

### ✅ 新增功能

1. **AI模式切换**
   - 支持在已连接状态下切换AI模式
   - 自动重新连接新模式
   - 添加切换提示

2. **AI建议功能**
   - 新增"AI建议"按钮
   - 显示前5个最佳走子位置
   - 棋盘上蓝色标记显示建议位置
   - 建议列表显示位置和评分
   - 点击建议可直接落子

3. **实时对局数据**
   - 黑白棋子数统计
   - 棋子数差距显示
   - 总步数统计
   - 可视化进度条对比

### 📝 使用说明

#### 切换AI模式
1. 在控制面板选择AI模式
2. 系统自动重新连接
3. 可以立即使用新模式

#### 使用AI建议
1. 点击"AI建议"按钮
2. 查看棋盘上的蓝色标记
3. 查看右侧建议列表
4. 点击建议项直接落子

#### 查看对局数据
- 自动显示在控制面板下方
- 实时更新棋子数和步数
- 进度条显示双方对比

### 🔧 技术改进

- 后端新增分析模块 (`gtp_analysis.py`)
- 新增建议API端点 (`/api/gtp/suggestions`)
- 前端新增两个组件 (`AISuggestions.vue`, `GameStats.vue`)
- 增强状态管理（evaluation、aiSuggestions）

### ⚠️ 注意事项

- AI建议功能需要策略网络模型
- 切换AI模式会中断当前对局
- 对局数据基于棋子数，不包含领地评估

