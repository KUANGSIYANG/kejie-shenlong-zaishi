# 启动说明

## 快速启动

### 方式一：分别启动（推荐）

**终端1 - 启动后端服务：**
```bash
cd web-frontend/server
pip install -r requirements.txt
python gtp_bridge.py
```

**终端2 - 启动前端开发服务器：**
```bash
cd web-frontend
npm install
npm run dev
```

然后在浏览器打开 `http://localhost:3000`

### 方式二：使用启动脚本

**Windows:**
```bash
# 启动后端
start cmd /k "cd web-frontend/server && python gtp_bridge.py"

# 启动前端
cd web-frontend
npm install
npm run dev
```

**Linux/Mac:**
```bash
# 终端1
cd web-frontend/server && python gtp_bridge.py

# 终端2
cd web-frontend && npm install && npm run dev
```

## 配置说明

### 端口配置

- **前端端口**: 3000（可在 `vite.config.js` 中修改）
- **后端端口**: 8000（可在 `gtp_bridge.py` 中修改）

### 路径配置

后端服务会自动查找项目根目录的 `gtp.py` 文件。

如果遇到路径问题，可以修改 `gtp_bridge.py` 中的 `script_path` 设置。

## 常见问题

### 1. 后端启动失败

**问题**: `FileNotFoundError: GTP脚本不存在`

**解决**: 确保 `gtp.py` 文件在项目根目录，或者修改 `gtp_bridge.py` 中的路径。

### 2. 前端无法连接后端

**问题**: 网络错误或CORS错误

**解决**: 
- 确保后端服务已启动（访问 `http://localhost:8000/api/health` 检查）
- 检查 `vite.config.js` 中的代理配置

### 3. GTP命令无响应

**问题**: Python进程卡住或无响应

**解决**:
- 检查模型文件是否存在（policyNet.pt, playoutNet.pt, valueNet.pt）
- 查看后端终端是否有错误信息
- 尝试重新初始化会话

### 4. 落子无效

**问题**: 点击棋盘无反应或显示非法走子

**解决**:
- 确保已点击"连接AI"按钮
- 检查是否轮到当前玩家
- 查看控制台错误信息

## 开发模式

前端使用Vite的热重载功能，修改代码会自动刷新。

后端使用Flask的debug模式，修改代码需要重启服务。

## 生产部署

### 构建前端

```bash
cd web-frontend
npm run build
```

构建产物在 `dist/` 目录。

### 部署后端

可以使用gunicorn或uwsgi部署Flask应用：

```bash
pip install gunicorn
gunicorn -w 4 -b 0.0.0.0:8000 gtp_bridge:app
```

## 安全注意事项

⚠️ **注意**: 当前后端服务仅用于开发，生产环境需要：

1. 添加身份验证
2. 限制CORS来源
3. 添加请求速率限制
4. 使用HTTPS
5. 添加输入验证和错误处理

