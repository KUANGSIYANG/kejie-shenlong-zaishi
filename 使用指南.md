# 围棋AI使用指南

## ✅ 训练完成确认

所有模型文件已训练完成：
- ✅ policyNet.pt (328KB) - 策略网络
- ✅ playoutNet.pt (556KB) - 快速策略网络  
- ✅ valueNet.pt (45KB) - 价值网络

## 使用方法

### 方式一：使用GTP协议（推荐）

GTP (Go Text Protocol) 是围棋程序的标准通信协议，可以与图形界面围棋客户端（如Sabaki）连接对弈。

#### 1.1 直接使用策略网络（快速模式）

```bash
python gtp.py
```

这将启动GTP服务器，使用策略网络直接生成走子（速度较快）。

#### 1.2 使用MCTS搜索（更强模式）

```bash
python gtp.py MCTS
```

这将启动GTP服务器，使用蒙特卡洛树搜索（MCTS）算法生成走子（计算更深入，棋力更强，但速度较慢）。

#### 1.3 使用图形界面客户端（Sabaki）

1. **下载Sabaki**：
   - 访问 https://github.com/SabakiHQ/Sabaki/releases
   - 下载并安装适合你操作系统的版本

2. **配置引擎**：
   - 打开Sabaki
   - 菜单：`引擎` → `管理引擎...`
   - 点击 `添加引擎`
   - 配置如下：
     ```
     名称: Irene (Policy)
     路径: python
     参数: gtp.py
     工作目录: D:\weiqi\WEIQI\WQ
     ```
   - 或者使用MCTS模式：
     ```
     名称: Irene (MCTS)
     路径: python
     参数: gtp.py MCTS
     工作目录: D:\weiqi\WEIQI\WQ
     ```

3. **开始对弈**：
   - 在Sabaki中新建对局
   - 选择你的AI引擎作为对手
   - 开始对弈！

### 方式二：命令行交互式对弈

创建一个简单的命令行对弈脚本（可以自己实现）：

```python
# 示例：简单命令行对弈
from go import Go
from genMove import genMovePolicy, genMoveMCTS
import sys

go = Go()
print("围棋AI - 命令行对弈")
print("输入位置格式：F12 (F列，第12行)")
print("输入 'quit' 退出")

while True:
    # 显示棋盘
    print("\n当前棋盘：")
    for i in range(19):
        for j in range(19):
            if go.board[i][j] == 1:
                print('X', end='')
            elif go.board[i][j] == -1:
                print('O', end='')
            else:
                print('.', end='')
        print()
    
    # 玩家输入
    user_input = input("\n请输入你的走子 (如 F12) 或 'quit' 退出: ").strip()
    if user_input.lower() == 'quit':
        break
    
    # 解析并落子
    # ... (实现解析逻辑)
    
    # AI生成走子
    ai_move = genMovePolicy(go, -1)  # 假设玩家是1，AI是-1
    print(f"AI走子: {ai_move}")
```

### 方式三：程序化调用

在你的Python代码中直接调用：

```python
from go import Go
from genMove import genMovePolicy, genMoveMCTS

# 初始化棋盘
go = Go()

# 使用策略网络生成走子
move = genMovePolicy(go, 1)  # 1表示黑棋，-1表示白棋
print(f"策略网络建议: {move}")

# 或使用MCTS搜索生成走子（更强但更慢）
move = genMoveMCTS(go, 1)
print(f"MCTS建议: {move}")
```

## 两种走子模式对比

### 策略网络模式 (Policy Network)
- **速度**: ⚡ 快速（毫秒级）
- **计算**: 直接使用神经网络预测
- **适用场景**: 快速对弈、实时响应
- **启动**: `python gtp.py`

### MCTS模式 (Monte Carlo Tree Search)
- **速度**: 🐢 较慢（秒级，200次迭代）
- **计算**: 结合策略网络、快速策略网络和价值网络进行深度搜索
- **适用场景**: 更强棋力、深入计算
- **启动**: `python gtp.py MCTS`

## 测试连接

可以通过命令行测试GTP协议是否正常工作：

```bash
python gtp.py
```

然后在命令行输入以下GTP命令：
```
name
version
boardsize 19
clear_board
genmove B
play W F12
genmove B
showboard
quit
```

## 常见问题

### 1. 模型文件找不到？
确保以下文件都在当前目录：
- policyNet.pt
- playoutNet.pt
- valueNet.pt

### 2. GPU/CPU使用？
- 如果有CUDA GPU，程序会自动使用GPU加速
- 没有GPU也能运行，但速度会慢一些

### 3. 内存不足？
- 策略网络模式：需要约2-4GB内存
- MCTS模式：需要约4-8GB内存

### 4. 对弈时无响应？
- 检查是否所有.pt文件都存在
- 检查Python环境是否正确
- 查看错误输出信息

## 下一步

- 🎮 下载Sabaki图形界面，体验完整对弈
- 🔧 调整MCTS参数（在genMove.py中修改迭代次数）
- 📊 分析对局记录，改进模型
- 🚀 尝试不同配置，比较棋力差异

## 参考

- README.md - 项目说明
- ARCHITECTURE.md - 代码架构分析
- 训练步骤.md - 训练流程



