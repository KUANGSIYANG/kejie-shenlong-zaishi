{
  "version": 3,
  "sources": ["../../classnames/index.js", "../../@sabaki/shudan/src/Goban.js", "../../@sabaki/shudan/src/helper.js", "../../@sabaki/shudan/src/Coord.js", "../../@sabaki/shudan/src/Grid.js", "../../preact/hooks/src/index.js", "../../@sabaki/shudan/src/Vertex.js", "../../@sabaki/shudan/src/Marker.js", "../../@sabaki/shudan/src/Line.js", "../../@sabaki/shudan/src/BoundedGoban.js"],
  "sourcesContent": ["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "import { createElement as h, Component } from \"preact\";\r\nimport classnames from \"classnames\";\r\n\r\nimport {\r\n  random,\r\n  readjustShifts,\r\n  neighborhood,\r\n  vertexEquals,\r\n  vertexEvents,\r\n  diffSignMap,\r\n  range,\r\n  getHoshis,\r\n} from \"./helper.js\";\r\nimport { CoordX, CoordY } from \"./Coord.js\";\r\nimport Grid from \"./Grid.js\";\r\nimport Vertex from \"./Vertex.js\";\r\nimport Line from \"./Line.js\";\r\n\r\nexport default class Goban extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (\r\n      this.props.animateStonePlacement &&\r\n      !this.state.clearAnimatedVerticesHandler &&\r\n      this.state.animatedVertices.length > 0\r\n    ) {\r\n      // Handle stone animation\r\n\r\n      for (let [x, y] of this.state.animatedVertices) {\r\n        this.state.shiftMap[y][x] = random(7) + 1;\r\n        readjustShifts(this.state.shiftMap, [x, y]);\r\n      }\r\n\r\n      this.setState({ shiftMap: this.state.shiftMap });\r\n\r\n      // Clear animation classes\r\n\r\n      this.setState({\r\n        clearAnimatedVerticesHandler: setTimeout(() => {\r\n          this.setState({\r\n            animatedVertices: [],\r\n            clearAnimatedVerticesHandler: null,\r\n          });\r\n        }, this.props.animationDuration ?? 200),\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let { width, height, rangeX, rangeY, xs, ys, hoshis, shiftMap, randomMap } =\r\n      this.state;\r\n\r\n    let {\r\n      innerProps = {},\r\n      vertexSize = 24,\r\n      coordX,\r\n      coordY,\r\n      busy,\r\n      signMap,\r\n      paintMap,\r\n      heatMap,\r\n      markerMap,\r\n      ghostStoneMap,\r\n      fuzzyStonePlacement = false,\r\n      showCoordinates = false,\r\n      lines = [],\r\n      selectedVertices = [],\r\n      dimmedVertices = [],\r\n    } = this.props;\r\n\r\n    let animatedVertices = [].concat(\r\n      ...this.state.animatedVertices.map(neighborhood)\r\n    );\r\n\r\n    return h(\r\n      \"div\",\r\n      {\r\n        ...innerProps,\r\n        id: this.props.id,\r\n        className:\r\n          classnames(\"shudan-goban\", \"shudan-goban-image\", {\r\n            \"shudan-busy\": busy,\r\n            \"shudan-coordinates\": showCoordinates,\r\n          }) +\r\n          \" \" +\r\n          (this.props.class ?? this.props.className ?? \"\"),\r\n\r\n        style: {\r\n          display: \"inline-grid\",\r\n          gridTemplateRows: showCoordinates ? \"1em 1fr 1em\" : \"1fr\",\r\n          gridTemplateColumns: showCoordinates ? \"1em 1fr 1em\" : \"1fr\",\r\n          fontSize: vertexSize,\r\n          lineHeight: \"1em\",\r\n          ...(this.props.style ?? {}),\r\n        },\r\n      },\r\n\r\n      showCoordinates &&\r\n        h(CoordX, { xs, style: { gridRow: \"1\", gridColumn: \"2\" }, coordX }),\r\n      showCoordinates &&\r\n        h(CoordY, {\r\n          height,\r\n          ys,\r\n          style: { gridRow: \"2\", gridColumn: \"1\" },\r\n          coordY,\r\n        }),\r\n\r\n      h(\r\n        \"div\",\r\n        {\r\n          className: \"shudan-content\",\r\n          style: {\r\n            position: \"relative\",\r\n            width: `${xs.length}em`,\r\n            height: `${ys.length}em`,\r\n            gridRow: showCoordinates ? \"2\" : \"1\",\r\n            gridColumn: showCoordinates ? \"2\" : \"1\",\r\n          },\r\n        },\r\n\r\n        h(Grid, {\r\n          vertexSize,\r\n          width,\r\n          height,\r\n          xs,\r\n          ys,\r\n          hoshis,\r\n        }),\r\n\r\n        h(\r\n          \"div\",\r\n          {\r\n            className: \"shudan-vertices\",\r\n            style: {\r\n              display: \"grid\",\r\n              gridTemplateColumns: `repeat(${xs.length}, 1em)`,\r\n              gridTemplateRows: `repeat(${ys.length}, 1em)`,\r\n              position: \"absolute\",\r\n              top: 0,\r\n              left: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              zIndex: 1,\r\n            },\r\n          },\r\n\r\n          ys.map((y) =>\r\n            xs.map((x) => {\r\n              let equalsVertex = (v) => vertexEquals(v, [x, y]);\r\n              let selected = selectedVertices.some(equalsVertex);\r\n\r\n              return h(\r\n                Vertex,\r\n                Object.assign(\r\n                  {\r\n                    key: [x, y].join(\"-\"),\r\n                    position: [x, y],\r\n\r\n                    shift: fuzzyStonePlacement ? shiftMap?.[y]?.[x] : 0,\r\n                    random: randomMap?.[y]?.[x],\r\n                    sign: signMap?.[y]?.[x],\r\n\r\n                    heat: heatMap?.[y]?.[x],\r\n                    marker: markerMap?.[y]?.[x],\r\n                    ghostStone: ghostStoneMap?.[y]?.[x],\r\n                    dimmed: dimmedVertices.some(equalsVertex),\r\n                    animate: animatedVertices.some(equalsVertex),\r\n\r\n                    paint: paintMap?.[y]?.[x],\r\n                    paintLeft: paintMap?.[y]?.[x - 1],\r\n                    paintRight: paintMap?.[y]?.[x + 1],\r\n                    paintTop: paintMap?.[y - 1]?.[x],\r\n                    paintBottom: paintMap?.[y + 1]?.[x],\r\n                    paintTopLeft: paintMap?.[y - 1]?.[x - 1],\r\n                    paintTopRight: paintMap?.[y - 1]?.[x + 1],\r\n                    paintBottomLeft: paintMap?.[y + 1]?.[x - 1],\r\n                    paintBottomRight: paintMap?.[y + 1]?.[x + 1],\r\n\r\n                    selected,\r\n                    selectedLeft:\r\n                      selected &&\r\n                      selectedVertices.some((v) => vertexEquals(v, [x - 1, y])),\r\n                    selectedRight:\r\n                      selected &&\r\n                      selectedVertices.some((v) => vertexEquals(v, [x + 1, y])),\r\n                    selectedTop:\r\n                      selected &&\r\n                      selectedVertices.some((v) => vertexEquals(v, [x, y - 1])),\r\n                    selectedBottom:\r\n                      selected &&\r\n                      selectedVertices.some((v) => vertexEquals(v, [x, y + 1])),\r\n                  },\r\n\r\n                  ...vertexEvents.map((e) => ({\r\n                    [`on${e}`]: this.props[`onVertex${e}`],\r\n                  }))\r\n                )\r\n              );\r\n            })\r\n          )\r\n        ),\r\n\r\n        h(\r\n          \"svg\",\r\n          {\r\n            className: \"shudan-lines\",\r\n            style: {\r\n              position: \"absolute\",\r\n              top: 0,\r\n              left: 0,\r\n              width: \"100%\",\r\n              height: \"100%\",\r\n              pointerEvents: \"none\",\r\n              zIndex: 2,\r\n            },\r\n          },\r\n\r\n          h(\r\n            \"g\",\r\n            {\r\n              transform: `translate(-${rangeX[0] * vertexSize} -${\r\n                rangeY[0] * vertexSize\r\n              })`,\r\n            },\r\n\r\n            lines.map(({ v1, v2, type }, i) =>\r\n              h(Line, { key: i, v1, v2, type, vertexSize })\r\n            )\r\n          )\r\n        )\r\n      ),\r\n\r\n      showCoordinates &&\r\n        h(CoordY, {\r\n          height,\r\n          ys,\r\n          style: { gridRow: \"2\", gridColumn: \"3\" },\r\n          coordY,\r\n        }),\r\n      showCoordinates &&\r\n        h(CoordX, { xs, style: { gridRow: \"3\", gridColumn: \"2\" }, coordX })\r\n    );\r\n  }\r\n}\r\n\r\nGoban.getDerivedStateFromProps = function (props, state) {\r\n  let { signMap = [], rangeX = [0, Infinity], rangeY = [0, Infinity] } = props;\r\n\r\n  let width = signMap.length === 0 ? 0 : signMap[0].length;\r\n  let height = signMap.length;\r\n\r\n  if (state.width === width && state.height === height) {\r\n    let animatedVertices = state.animatedVertices;\r\n\r\n    if (\r\n      props.animateStonePlacement &&\r\n      props.fuzzyStonePlacement &&\r\n      state.clearAnimatedVerticesHandler == null\r\n    ) {\r\n      animatedVertices = diffSignMap(state.signMap, signMap);\r\n    }\r\n\r\n    let result = {\r\n      signMap,\r\n      animatedVertices,\r\n    };\r\n\r\n    if (\r\n      !vertexEquals(state.rangeX, rangeX) ||\r\n      !vertexEquals(state.rangeY, rangeY)\r\n    ) {\r\n      // Range changed\r\n\r\n      Object.assign(result, {\r\n        rangeX,\r\n        rangeY,\r\n        xs: range(width).slice(rangeX[0], rangeX[1] + 1),\r\n        ys: range(height).slice(rangeY[0], rangeY[1] + 1),\r\n      });\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  // Board size changed\r\n\r\n  return {\r\n    signMap,\r\n    width,\r\n    height,\r\n    rangeX,\r\n    rangeY,\r\n    animatedVertices: [],\r\n    clearAnimatedVerticesHandler: null,\r\n    xs: range(width).slice(rangeX[0], rangeX[1] + 1),\r\n    ys: range(height).slice(rangeY[0], rangeY[1] + 1),\r\n    hoshis: getHoshis(width, height),\r\n    shiftMap: readjustShifts(signMap.map((row) => row.map((_) => random(8)))),\r\n    randomMap: signMap.map((row) => row.map((_) => random(4))),\r\n  };\r\n};\r\n", "export const alpha = \"ABCDEFGHJKLMNOPQRSTUVWXYZ\";\nexport const vertexEvents = [\n  \"Click\",\n  \"MouseDown\",\n  \"MouseUp\",\n  \"MouseMove\",\n  \"MouseEnter\",\n  \"MouseLeave\",\n  \"PointerDown\",\n  \"PointerUp\",\n  \"PointerMove\",\n  \"PointerEnter\",\n  \"PointerLeave\",\n];\n\nexport const avg = (xs) =>\n  xs.length === 0 ? 0 : xs.reduce((sum, x) => sum + x, 0) / xs.length;\n\nexport const range = (n) =>\n  Array(n)\n    .fill(0)\n    .map((_, i) => i);\n\nexport const random = (n) => Math.floor(Math.random() * (n + 1));\n\nexport const neighborhood = ([x, y]) => [\n  [x, y],\n  [x - 1, y],\n  [x + 1, y],\n  [x, y - 1],\n  [x, y + 1],\n];\n\nexport const vertexEquals = ([x1, y1], [x2, y2]) => x1 === x2 && y1 === y2;\n\nexport const lineEquals = ([v1, w1], [v2, w2]) =>\n  vertexEquals(v1, v2) && vertexEquals(w1, w2);\n\nexport const signEquals = (...xs) =>\n  xs.length === 0 ? true : xs.every((x) => Math.sign(x) === Math.sign(xs[0]));\n\nexport function getHoshis(width, height) {\n  if (Math.min(width, height) <= 6) return [];\n\n  let [nearX, nearY] = [width, height].map((x) => (x >= 13 ? 3 : 2));\n  let [farX, farY] = [width - nearX - 1, height - nearY - 1];\n  let [middleX, middleY] = [width, height].map((x) => (x - 1) / 2);\n\n  let result = [\n    [nearX, farY],\n    [farX, nearY],\n    [farX, farY],\n    [nearX, nearY],\n  ];\n\n  if (width % 2 !== 0 && height % 2 !== 0 && width !== 7 && height !== 7)\n    result.push([middleX, middleY]);\n  if (width % 2 !== 0 && width !== 7)\n    result.push([middleX, nearY], [middleX, farY]);\n  if (height % 2 !== 0 && height !== 7)\n    result.push([nearX, middleY], [farX, middleY]);\n\n  return result;\n}\n\nexport function readjustShifts(shiftMap, vertex = null) {\n  if (vertex == null) {\n    for (let y = 0; y < shiftMap.length; y++) {\n      for (let x = 0; x < shiftMap[0].length; x++) {\n        readjustShifts(shiftMap, [x, y]);\n      }\n    }\n  } else {\n    let [x, y] = vertex;\n    let direction = shiftMap[y][x];\n\n    let data = [\n      // Left\n      [\n        [1, 5, 8],\n        [x - 1, y],\n        [3, 7, 6],\n      ],\n      // Top\n      [\n        [2, 5, 6],\n        [x, y - 1],\n        [4, 7, 8],\n      ],\n      // Right\n      [\n        [3, 7, 6],\n        [x + 1, y],\n        [1, 5, 8],\n      ],\n      // Bottom\n      [\n        [4, 7, 8],\n        [x, y + 1],\n        [2, 5, 6],\n      ],\n    ];\n\n    for (let [directions, [qx, qy], removeShifts] of data) {\n      if (!directions.includes(direction)) continue;\n\n      if (shiftMap[qy] && removeShifts.includes(shiftMap[qy][qx])) {\n        shiftMap[qy][qx] = 0;\n      }\n    }\n  }\n\n  return shiftMap;\n}\n\nexport function diffSignMap(before, after) {\n  if (\n    before === after ||\n    before.length === 0 ||\n    before.length !== after.length ||\n    before[0].length !== after[0].length\n  ) {\n    return [];\n  }\n\n  let result = [];\n\n  for (let y = 0; y < before.length; y++) {\n    for (let x = 0; x < before[0].length; x++) {\n      if (before[y][x] === 0 && after[y] != null && after[y][x]) {\n        result.push([x, y]);\n      }\n    }\n  }\n\n  return result;\n}\n", "import { createElement as h, Component } from \"preact\";\nimport { alpha } from \"./helper.js\";\n\nexport class CoordX extends Component {\n  render() {\n    let {\n      style,\n      xs,\n      coordX = (i) => alpha[i] || alpha[alpha.length - 1],\n    } = this.props;\n\n    return h(\n      \"div\",\n      {\n        className: \"shudan-coordx\",\n        style: {\n          display: \"flex\",\n          textAlign: \"center\",\n          ...style,\n        },\n      },\n\n      xs.map((i) =>\n        h(\n          \"div\",\n          { key: i, style: { width: \"1em\" } },\n          h(\"span\", { style: { display: \"block\" } }, coordX(i))\n        )\n      )\n    );\n  }\n}\n\nexport class CoordY extends Component {\n  render() {\n    let { style, height, ys, coordY = (i) => height - i } = this.props;\n\n    return h(\n      \"div\",\n      {\n        className: \"shudan-coordy\",\n        style: {\n          textAlign: \"center\",\n          ...style,\n        },\n      },\n\n      ys.map((i) =>\n        h(\n          \"div\",\n          { key: i, style: { height: \"1em\" } },\n          h(\"span\", { style: { display: \"block\" } }, coordY(i))\n        )\n      )\n    );\n  }\n}\n", "import { createElement as h, Component } from \"preact\";\r\n\r\nexport default class Grid extends Component {\r\n  shouldComponentUpdate(nextProps) {\r\n    return (\r\n      nextProps.vertexSize !== this.props.vertexSize ||\r\n      nextProps.width !== this.props.width ||\r\n      nextProps.height !== this.props.height ||\r\n      nextProps.xs.length !== this.props.xs.length ||\r\n      nextProps.ys.length !== this.props.ys.length ||\r\n      nextProps.xs[0] !== this.props.xs[0] ||\r\n      nextProps.ys[0] !== this.props.ys[0]\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let { vertexSize, width, height, xs, ys, hoshis } = this.props;\r\n    let halfVertexSize = vertexSize / 2;\r\n\r\n    return (\r\n      xs.length > 0 &&\r\n      ys.length > 0 &&\r\n      h(\r\n        \"svg\",\r\n        {\r\n          className: \"shudan-grid\",\r\n          style: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            zIndex: 0,\r\n          },\r\n        },\r\n\r\n        // Draw grid lines\r\n\r\n        ys.map((_, i) => {\r\n          let x = xs[0] === 0 ? halfVertexSize : 0;\r\n\r\n          return h(\"rect\", {\r\n            key: `h${i}`,\r\n\r\n            className: \"shudan-gridline shudan-horizontal\",\r\n            x: x,\r\n            y: (2 * i + 1) * halfVertexSize,\r\n            width:\r\n              xs[xs.length - 1] === width - 1\r\n                ? (2 * xs.length - 1) * halfVertexSize - x\r\n                : xs.length * vertexSize - x,\r\n            height: 1,\r\n          });\r\n        }),\r\n\r\n        xs.map((_, i) => {\r\n          let y = ys[0] === 0 ? halfVertexSize : 0;\r\n\r\n          return h(\"rect\", {\r\n            key: `v${i}`,\r\n\r\n            className: \"shudan-gridline shudan-vertical\",\r\n            x: (2 * i + 1) * halfVertexSize,\r\n            y: y,\r\n            width: 1,\r\n            height:\r\n              ys[ys.length - 1] === height - 1\r\n                ? (2 * ys.length - 1) * halfVertexSize - y\r\n                : ys.length * vertexSize - y,\r\n          });\r\n        }),\r\n\r\n        // Draw hoshi points\r\n\r\n        hoshis.map(([x, y]) => {\r\n          let i = xs.indexOf(x);\r\n          let j = ys.indexOf(y);\r\n          if (i < 0 || j < 0) return;\r\n\r\n          return h(\"circle\", {\r\n            key: [x, y].join(\"-\"),\r\n\r\n            className: \"shudan-hoshi\",\r\n            cx: (2 * i + 1) * halfVertexSize + 0.5,\r\n            cy: (2 * j + 1) * halfVertexSize + 0.5,\r\n            r: \".1em\",\r\n          });\r\n        })\r\n      )\r\n    );\r\n  }\r\n}\r\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import { createElement as h } from \"preact\";\r\nimport { useCallback } from \"preact/hooks\";\r\nimport classnames from \"classnames\";\r\n\r\nimport { avg, vertexEvents, signEquals } from \"./helper.js\";\r\nimport Marker from \"./Marker.js\";\r\n\r\nconst absoluteStyle = (zIndex) => ({\r\n  position: \"absolute\",\r\n  zIndex,\r\n});\r\n\r\nexport default function Vertex(props) {\r\n  let {\r\n    position,\r\n    shift,\r\n    random,\r\n    sign,\r\n    heat,\r\n    paint,\r\n    paintLeft,\r\n    paintRight,\r\n    paintTop,\r\n    paintBottom,\r\n    paintTopLeft,\r\n    paintTopRight,\r\n    paintBottomLeft,\r\n    paintBottomRight,\r\n    dimmed,\r\n    marker,\r\n    ghostStone,\r\n    animate,\r\n    selected,\r\n    selectedLeft,\r\n    selectedRight,\r\n    selectedTop,\r\n    selectedBottom,\r\n  } = props;\r\n\r\n  let eventHandlers = {};\r\n\r\n  for (let eventName of vertexEvents) {\r\n    eventHandlers[eventName] = useCallback(\r\n      (evt) => {\r\n        props[`on${eventName}`]?.(evt, position);\r\n      },\r\n      [...position, props[`on${eventName}`]]\r\n    );\r\n  }\r\n\r\n  let markerMarkup = (zIndex) =>\r\n    !!marker &&\r\n    h(Marker, {\r\n      key: \"marker\",\r\n      sign,\r\n      type: marker.type,\r\n      label: marker.label,\r\n      zIndex,\r\n    });\r\n\r\n  return h(\r\n    \"div\",\r\n    Object.assign(\r\n      {\r\n        \"data-x\": position[0],\r\n        \"data-y\": position[1],\r\n\r\n        title: marker?.label,\r\n        style: {\r\n          position: \"relative\",\r\n        },\r\n        className: classnames(\r\n          \"shudan-vertex\",\r\n          `shudan-random_${random}`,\r\n          `shudan-sign_${sign}`,\r\n\r\n          {\r\n            [`shudan-shift_${shift}`]: !!shift,\r\n            [`shudan-heat_${!!heat && heat.strength}`]: !!heat,\r\n            \"shudan-dimmed\": dimmed,\r\n\r\n            [`shudan-paint_${paint > 0 ? 1 : -1}`]: !!paint,\r\n            \"shudan-paintedleft\":\r\n              !!paint && Math.sign(paintLeft) === Math.sign(paint),\r\n            \"shudan-paintedright\":\r\n              !!paint && Math.sign(paintRight) === Math.sign(paint),\r\n            \"shudan-paintedtop\":\r\n              !!paint && Math.sign(paintTop) === Math.sign(paint),\r\n            \"shudan-paintedbottom\":\r\n              !!paint && Math.sign(paintBottom) === Math.sign(paint),\r\n\r\n            \"shudan-selected\": selected,\r\n            \"shudan-selectedleft\": selectedLeft,\r\n            \"shudan-selectedright\": selectedRight,\r\n            \"shudan-selectedtop\": selectedTop,\r\n            \"shudan-selectedbottom\": selectedBottom,\r\n            \"shudan-animate\": animate,\r\n          },\r\n\r\n          marker && marker.type && `shudan-marker_${marker.type}`,\r\n          marker &&\r\n            marker.type === \"label\" &&\r\n            marker.label &&\r\n            (marker.label.includes(\"\\n\") || marker.label.length >= 3) &&\r\n            `shudan-smalllabel`,\r\n\r\n          ghostStone && `shudan-ghost_${ghostStone.sign}`,\r\n          ghostStone && ghostStone.type && `shudan-ghost_${ghostStone.type}`,\r\n          ghostStone && ghostStone.faint && `shudan-ghost_faint`\r\n        ),\r\n      },\r\n      ...vertexEvents.map((eventName) => ({\r\n        [`on${eventName}`]: eventHandlers[eventName],\r\n      }))\r\n    ),\r\n\r\n    !sign && markerMarkup(0),\r\n    !sign &&\r\n      !!ghostStone &&\r\n      h(\"div\", {\r\n        key: \"ghost\",\r\n        className: \"shudan-ghost\",\r\n        style: absoluteStyle(1),\r\n      }),\r\n\r\n    h(\r\n      \"div\",\r\n      { key: \"stone\", className: \"shudan-stone\", style: absoluteStyle(2) },\r\n\r\n      !!sign &&\r\n        h(\"div\", {\r\n          key: \"shadow\",\r\n          className: \"shudan-shadow\",\r\n          style: absoluteStyle(),\r\n        }),\r\n\r\n      !!sign &&\r\n        h(\r\n          \"div\",\r\n          {\r\n            key: \"inner\",\r\n            className: classnames(\r\n              \"shudan-inner\",\r\n              \"shudan-stone-image\",\r\n              `shudan-random_${random}`,\r\n              `shudan-sign_${sign}`\r\n            ),\r\n            style: absoluteStyle(),\r\n          },\r\n          sign\r\n        ),\r\n\r\n      !!sign && markerMarkup()\r\n    ),\r\n\r\n    (!!paint || !!paintLeft || !!paintRight || !!paintTop || !!paintBottom) &&\r\n      h(\r\n        \"div\",\r\n        {\r\n          key: \"paint\",\r\n          className: \"shudan-paint\",\r\n          style: absoluteStyle(3),\r\n        },\r\n\r\n        h(\"div\", {\r\n          className: \"shudan-inner\",\r\n          style: {\r\n            ...absoluteStyle(),\r\n            opacity: avg(\r\n              (!!paint\r\n                ? [paint]\r\n                : [paintLeft, paintRight, paintTop, paintBottom].map(\r\n                    (x) => x !== 0 && !isNaN(x)\r\n                  )\r\n              ).map((x) => Math.abs(x ?? 0) * 0.5)\r\n            ),\r\n            boxShadow: [\r\n              signEquals(paintLeft, paintTop, paintTopLeft)\r\n                ? [Math.sign(paintTop), \"-.5em -.5em\"]\r\n                : null,\r\n              signEquals(paintRight, paintTop, paintTopRight)\r\n                ? [Math.sign(paintTop), \".5em -.5em\"]\r\n                : null,\r\n              signEquals(paintLeft, paintBottom, paintBottomLeft)\r\n                ? [Math.sign(paintBottom), \"-.5em .5em\"]\r\n                : null,\r\n              signEquals(paintRight, paintBottom, paintBottomRight)\r\n                ? [Math.sign(paintBottom), \".5em .5em\"]\r\n                : null,\r\n            ]\r\n              .filter((x) => !!x && x[0] !== 0)\r\n              .map(\r\n                ([sign, translation]) =>\r\n                  `${translation} 0 0 var(${\r\n                    sign > 0\r\n                      ? \"--shudan-black-background-color\"\r\n                      : \"--shudan-white-background-color\"\r\n                  })`\r\n              )\r\n              .join(\",\"),\r\n          },\r\n        })\r\n      ),\r\n\r\n    !!selected &&\r\n      h(\"div\", {\r\n        key: \"selection\",\r\n        className: \"shudan-selection\",\r\n        style: absoluteStyle(4),\r\n      }),\r\n\r\n    h(\"div\", {\r\n      key: \"heat\",\r\n      className: \"shudan-heat\",\r\n      style: absoluteStyle(5),\r\n    }),\r\n    !!heat &&\r\n      h(\r\n        \"div\",\r\n        {\r\n          key: \"heatlabel\",\r\n          className: \"shudan-heatlabel\",\r\n          style: absoluteStyle(6),\r\n        },\r\n        heat.text && heat.text.toString()\r\n      )\r\n  );\r\n}\r\n", "import { createElement as h } from \"preact\";\r\n\r\nexport default function Marker({ sign, type, label, zIndex }) {\r\n  let containerProps = {\r\n    className: \"shudan-marker\",\r\n    style: {\r\n      position: \"absolute\",\r\n      zIndex,\r\n    },\r\n  };\r\n\r\n  return type === \"label\"\r\n    ? h(\"div\", containerProps, label)\r\n    : h(\r\n        \"svg\",\r\n        {\r\n          ...containerProps,\r\n          viewBox: \"0 0 1 1\",\r\n        },\r\n\r\n        type === \"circle\" || type === \"loader\" || type === \"point\"\r\n          ? h(\"circle\", {\r\n              cx: 0.5,\r\n              cy: 0.5,\r\n              r: type === \"point\" ? 0.18 : 0.25,\r\n              \"vector-effect\": \"non-scaling-stroke\",\r\n            })\r\n          : type === \"square\"\r\n          ? h(\"rect\", {\r\n              x: 0.25,\r\n              y: 0.25,\r\n              width: 0.5,\r\n              height: 0.5,\r\n              \"vector-effect\": \"non-scaling-stroke\",\r\n            })\r\n          : type === \"cross\"\r\n          ? [\r\n              sign === 0 &&\r\n                h(\"rect\", {\r\n                  x: 0.25,\r\n                  y: 0.25,\r\n                  width: 0.5,\r\n                  height: 0.5,\r\n                  stroke: \"none\",\r\n                }),\r\n              h(\"path\", {\r\n                d: \"M 0 0 L .5 .5 M .5 0 L 0 .5\",\r\n                transform: \"translate(.25 .25)\",\r\n                \"vector-effect\": \"non-scaling-stroke\",\r\n              }),\r\n            ]\r\n          : type === \"triangle\"\r\n          ? h(\"path\", {\r\n              d: \"M 0 .5 L .6 .5 L .3 0 z\",\r\n              transform: \"translate(.2 .2)\",\r\n              \"vector-effect\": \"non-scaling-stroke\",\r\n            })\r\n          : null\r\n      );\r\n}\r\n", "import { createElement as h, Component } from \"preact\";\r\nimport { vertexEquals } from \"./helper.js\";\r\n\r\nexport default class Line extends Component {\r\n  shouldComponentUpdate(nextProps) {\r\n    let { v1, v2, type, vertexSize } = this.props;\r\n\r\n    return (\r\n      type !== nextProps.type ||\r\n      vertexSize !== nextProps.vertexSize ||\r\n      !vertexEquals(v1, nextProps.v1) ||\r\n      !vertexEquals(v2, nextProps.v2)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    let { v1, v2, type = \"line\", vertexSize } = this.props;\r\n    if (vertexEquals(v1, v2)) return;\r\n\r\n    let [pos1, pos2] = [v1, v2].map((v) => v.map((x) => x * vertexSize));\r\n    let [dx, dy] = pos1.map((x, i) => pos2[i] - x);\r\n    let [left, top] = pos1.map((x, i) => (x + pos2[i] + vertexSize) / 2);\r\n\r\n    let angle = (Math.atan2(dy, dx) * 180) / Math.PI;\r\n    let length = Math.sqrt(dx * dx + dy * dy);\r\n    let right = left + length;\r\n\r\n    return h(\"path\", {\r\n      className: `shudan-${type}`,\r\n      d: `M ${left} ${top} h ${length} ${\r\n        type === \"arrow\"\r\n          ? (() => {\r\n              let [x1, y1] = [right - vertexSize / 2, top - vertexSize / 4];\r\n              let [x2, y2] = [right - vertexSize / 2, top + vertexSize / 4];\r\n\r\n              return `L ${x1} ${y1} M ${right} ${top} L ${x2} ${y2}`;\r\n            })()\r\n          : \"\"\r\n      }`,\r\n      transform: `rotate(${angle} ${left} ${top}) translate(${-length / 2} 0)`,\r\n    });\r\n  }\r\n}\r\n", "import { createElement as h, Component } from \"preact\";\nimport Goban from \"./Goban.js\";\n\nexport default class BoundedGoban extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      vertexSize: 1,\n      visibility: \"hidden\",\n    };\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate();\n  }\n\n  componentDidUpdate(prevProps) {\n    let {\n      showCoordinates,\n      maxWidth,\n      maxHeight,\n      maxVertexSize,\n      rangeX,\n      rangeY,\n      signMap,\n      onResized = () => {},\n    } = this.props;\n\n    if (\n      this.state.visibility !== \"visible\" ||\n      showCoordinates !== prevProps.showCoordinates ||\n      maxWidth !== prevProps.maxWidth ||\n      maxHeight !== prevProps.maxHeight ||\n      maxVertexSize !== prevProps.maxVertexSize ||\n      JSON.stringify(rangeX) !== JSON.stringify(prevProps.rangeX) ||\n      JSON.stringify(rangeY) !== JSON.stringify(prevProps.rangeY) ||\n      signMap.length !== prevProps.signMap.length ||\n      (signMap[0] || []).length !== (prevProps.signMap[0] || []).length\n    ) {\n      let { offsetWidth, offsetHeight } = this.element;\n      let scale = Math.min(maxWidth / offsetWidth, maxHeight / offsetHeight);\n      let vertexSize = Math.max(Math.floor(this.state.vertexSize * scale), 1);\n\n      if (this.state.vertexSize !== vertexSize) {\n        this.setState({ vertexSize }, onResized);\n      }\n\n      if (this.state.visibility !== \"visible\") {\n        this.setState({ visibility: \"visible\" });\n      }\n    }\n  }\n\n  render() {\n    let { innerProps = {}, style = {}, maxVertexSize = Infinity } = this.props;\n    let { ref: innerRef = () => {} } = innerProps;\n\n    return h(Goban, {\n      ...this.props,\n\n      innerProps: {\n        ...innerProps,\n        ref: (el) => (innerRef(el), (this.element = el)),\n      },\n\n      style: {\n        visibility: this.state.visibility,\n        ...style,\n      },\n\n      vertexSize: Math.min(this.state.vertexSize, maxVertexSize),\n    });\n  }\n}\n"],
  "mappings": "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",
  "names": ["i", "import_classnames", "x", "_", "i", "x", "i", "_", "i", "x", "j", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "random", "classnames", "x", "sign", "v", "x", "i", "x", "classnames", "v", "e", "i", "_"]
}
